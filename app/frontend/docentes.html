<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Insertar Profesor</title>
</head>
<body>
    <h1>Insertar Profesor</h1>
    <form id="profesorForm">
        <input type="text" name="nombre" placeholder="Nombre" required><br>
        <input type="text" name="ap_P" placeholder="Apellido Paterno" required><br>
        <input type="text" name="ap_M" placeholder="Apellido Materno" required><br>
        <input type="text" name="no_empleado" placeholder="No. Empleado" required><br>
        <input type="number" name="telefono" placeholder="Teléfono" required><br>
        <input type="email" name="email" placeholder="Email" required><br>
        <input type="text" name="grado_estudio" placeholder="Grado de Estudio" required><br>
        <input type="text" name="sexo" placeholder="Sexo" required><br>
        <input type="number" name="id_materia" placeholder="ID Materia" required><br>
        <input type="number" name="id_salon" placeholder="ID Salón" required><br>
        <button type="submit">Enviar</button>
    </form>
    <div id="respuesta"></div>

    <script>
        document.getElementById('profesorForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            const form = e.target;
            const data = {
                nombre: form.nombre.value,
                ap_P: form.ap_P.value,
                ap_M: form.ap_M.value,
                no_empleado: Number(form.no_empleado.value),
                telefono: Number(form.telefono.value),
                email: form.email.value,
                grado_estudio: form.grado_estudio.value,
                sexo: form.sexo.value,
                id_materia: Number(form.id_materia.value),
                id_salon: Number(form.id_salon.value)
            };

            const respuestaDiv = document.getElementById('respuesta');
            respuestaDiv.textContent = "Enviando...";

            try {
                const res = await fetch('http://localhost:5000/profesores/insertar', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(data)
                });
                const result = await res.json();
                respuestaDiv.textContent = result.mensaje || result.error;
            } catch (err) {
                respuestaDiv.textContent = "Error de conexión con el backend";
            }
        });
    </script>
</body>
</html>